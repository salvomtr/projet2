__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(u,l=(0,n.default)()){const{treatmentName:f}=(0,t.default)(u,l)||{};return f||'treatment_unknown'};var t=babelHelpers.interopRequireDefault(r(d[0])),n=babelHelpers.interopRequireDefault(r(d[1]))}),"01612d",["e1e17e","6b9728"]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.convertToStableObjectOrder=function t(o){if(Array.isArray(o))return o.map(o=>t(o));if('object'==typeof o&&null!==o){const n=o;return'function'==typeof n.toJSON?t(n.toJSON()):Object.keys(o).sort().reduce((n,c)=>(n[c]=t(o[c]),n),{})}return o}}),"433a68",[]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.createGlobalId=function(n,t){return(function(n){return window.btoa(n)})((function(n,t){return`${n}:${encodeURIComponent(t).replace(/%20/g,'+').replace(/\(/g,'%28').replace(/\)/g,'%29')}`})(n,t))},e.getInternalId=function(n){const{internalId:t}=(function(n){const t=n.split(':'),[o,c]=t,l=c&&decodeURIComponent(c.replace(/\+/g,'%20').replace(/%28/g,'(').replace(/%29/g,')'));if(void 0===o||void 0===l)throw new Error('Failed to decode global ID');return{typename:o,internalId:l}})((o=n,window.atob(o)));var o;return t},e.parseGlobalId=function(n){return n},e.stringifyGlobalId=function(n){return n}}),"685055",[]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){return t.default.get('exploreTreatments')||[]};var t=babelHelpers.interopRequireDefault(r(d[0]))}),"6b9728",["05b07c"]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=babelHelpers.interopRequireDefault(r(d[0])),u=r(d[1]),o=r(d[2]),n=babelHelpers.interopRequireDefault(r(d[3])),s=r(d[4]),l=babelHelpers.interopRequireDefault(r(d[5])),c=r(d[6]);var p=({cookie:p,exploreTreatments:C,isPrefetch:f,location:h,niobeMinimalistClient:b})=>{const{search:y}=h,R=(0,o.coerceStaysCheckoutParams)((0,t.default)(y)),_=p(u.FORM_FACTOR_COOKIE)===u.FORM_FACTOR.COMPACT,F='treatment'===(0,n.default)(s.CHECKOUT_LEAN_FRAGMENT_ERF,C),O=(0,c.getCheckoutMutationVariable)({input:{...R,checkoutId:null,isCompact:_,persistentQueryMetadata:{}},isLeanFragment:F,getPersistentQPData:()=>null,shouldFetchTypedPaymentsData:!1}),P=f?{headers:{'X-Airbnb-Prefetch':'web'}}:void 0,{input:M}=O,{productId:T}=M;if(!T){const t=f?'StaysCheckoutCreateRoute.prepare.prefetch_mutation':'StaysCheckoutCreateRoute.prepare_mutation';(0,c.reportStaysCheckoutInputError)(M,t)}const k={context:P,query:l.default,variables:O};return{isLeanFragment:F,queryRef:b.preloadQuery(k),shouldFetchTypedPaymentsData:!1}};e.default=p}),"727006",["99e500","ab5cd2","b91fe0","01612d","b0ae14","c7b28e","dc77a0"]);
__d((function(g,r,i,a,m,e,d){"use strict";let _;Object.defineProperty(e,"__esModule",{value:!0}),e.STAYS_HOME_URL=e.SPLIT_STAYS_TITLE_FADE_END_OFFSET=e.CHECKOUT_LEAN_FRAGMENT_ERF=e.BillingType=void 0,e.BillingType=_,(function(_){_.RESERVATION="Reservation2",_.TRIP="MtTrip",_.FIXED_AMOUNT_DONATION="FixedAmountDonation",_.CLAIM_GUEST_TO_HOST="ClaimGuestToHost"})(_||(e.BillingType=_={}));e.SPLIT_STAYS_TITLE_FADE_END_OFFSET=72;e.STAYS_HOME_URL='/s/homes';e.CHECKOUT_LEAN_FRAGMENT_ERF='checkout_lean_section_fragments_v2'}),"b0ae14",[]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.airbnbOrgGuestTypes=void 0;e.airbnbOrgGuestTypes=["CLIENT","ORGANIZATION_MEMBER","SELF"]}),"b2b2f7",[]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.QueryParamKeys=void 0,e.buildUrlInfo=function(t,n){return{urlParams:t.params,queryParams:f((0,p.default)(n.search)),location:n}},e.coerceStaysCheckoutParams=f;var t,n,o,s,u,c,p=babelHelpers.interopRequireDefault(r(d[0]));!(function(t){t.debug="debug",t.is_lr_booking="isLrBooking",t.isLrBooking="isLrBooking",t.work_trip="isWorkTrip",t.is_work_trip="isWorkTrip",t.isWorkTrip="isWorkTrip",t.isFapiaoRequired="isFapiaoRequired",t.open_homes_affiliated="openHomesAffiliated",t.openHomesAffiliated="openHomesAffiliated",t.remove_coupon_action="removeCouponAction",t.removeCouponAction="removeCouponAction",t.skip_coupon_auto_apply="skipCouponAutoApply",t.skipCouponAutoApply="skipCouponAutoApply",t.vacation_rental="vacationRental",t.vacationRental="vacationRental",t.is_pending_payment="isWaitToPay",t.isWaitToPay="isWaitToPay"})(t||(t={})),(function(t){t.affiliate_id="affiliateId",t.affiliateId="affiliateId",t.airbnb_org_guest_type="airbnbOrgGuestType",t.airbnbOrgGuestType="airbnbOrgGuestType",t.booking_attempt_id="bookingAttemptId",t.bookingAttemptId="bookingAttemptId",t.campaign_param="campaignParam",t.campaignParam="campaignParam",t.code="code",t.otherCode="otherCode",t.other_code="otherCode",t.coupon_code="couponCode",t.couponCode="couponCode",t.display_currency="guestCurrency",t.displayCurrency="guestCurrency",t.guest_currency="guestCurrency",t.guestCurrency="guestCurrency",t.partnership_external_id="partnershipExternalId",t.partnershipExternalId="partnershipExternalId",t.pendingGuestEmail="pendingGuestEmail",t.pendingTripToken="pendingTripToken",t.ratePlanId="ratePlanId"})(n||(n={})),(function(t){t.cause_id="causeId",t.causeId="causeId",t.disaster_id="disasterId",t.disasterId="disasterId",t.airbnb_org_response_id="airbnbOrgResponseId",t.airbnbOrgResponseId="airbnbOrgResponseId",t.guest_checkin_time="guestCheckinTime",t.guestCheckinTime="guestCheckinTime",t.adults="numberOfAdults",t.number_of_adults="numberOfAdults",t.numberOfAdults="numberOfAdults",t.children="numberOfChildren",t.number_of_children="numberOfChildren",t.numberOfChildren="numberOfChildren",t.guests="numberOfGuests",t.number_of_guests="numberOfGuests",t.numberOfGuests="numberOfGuests",t.infants="numberOfInfants",t.number_of_infants="numberOfInfants",t.numberOfInfants="numberOfInfants",t.pets="numberOfPets",t.number_of_pets="numberOfPets",t.numberOfPets="numberOfPets",t.otherAdults="otherAdults",t.other_adults="otherAdults",t.otherChildren="otherChildren",t.other_children="otherChildren",t.otherGuests="otherGuests",t.other_guests="otherGuests",t.otherInfants="otherInfants",t.other_infants="otherInfants",t.otherPets="otherPets",t.other_pets="otherPets",t.selected_cancellation_policy_id="selectedCancellationPolicyId",t.selectedCancellationPolicyId="selectedCancellationPolicyId",t.focusedListing="focusedListing",t.focused_listing="focusedListing",t.fov_flow_canceled="fovFlowCanceled",t.fovFlowCanceled="fovFlowCanceled"})(o||(o={})),(function(t){t.guest_id="guestId",t.guestId="guestId",t.luxury_listing_quote_id="luxuryListingQuoteId",t.luxuryListingQuoteId="luxuryListingQuoteId",t.number_of_installments="numberOfInstallments",t.numberOfInstallments="numberOfInstallments",t.pending_traveler_id="pendingTravelerId",t.pendingTravelerId="pendingTravelerId",t.pending_guest_id="pendingGuestId",t.pendingGuestId="pendingGuestId",t.insuranceCode="insuranceCode",t.product_id="productId",t.productId="productId",t.hosting_id="productId",t.otherListing="otherListing",t.other_listing="otherListing",t.security_deposit_id="securityDepositId",t.securityDepositId="securityDepositId",t.special_offer_id="specialOfferId",t.specialOfferId="specialOfferId",t.splitStaysId="splitStaysId",t.split_stays_id="splitStaysId"})(s||(s={})),(function(t){t.checkin="checkin",t.checkout="checkout",t.check_in="checkin",t.check_out="checkout",t.otherCheckin="otherCheckin",t.other_check_in="otherCheckin",t.otherCheckout="otherCheckout",t.other_check_out="otherCheckout"})(u||(u={})),(function(t){t.sectionIds="sectionIds"})(c||(c={}));const l={...t,...n,...o,...s,...u,...c};function f(u,c=!1,p=!1){return Object.entries(u).reduce((u,[f,_])=>{if(p&&void 0===_)return u;const h=l[f];return h?t[f]?''!==_&&'string'==typeof _?{...u,[h]:'true'===_}:'boolean'==typeof _?{...u,[h]:_}:u:o[f]?''===_||'string'!=typeof _||Number.isNaN(parseInt(_,10))?''!==_&&'number'==typeof _?{...u,[h]:_}:u:{...u,[h]:parseInt(_,10)}:s[f]?''!==_?{...u,[h]:String(_)}:u:''!==_||f===n.couponCode||f===n.coupon_code?{...u,[h]:_}:u:c?{...u,[f]:_}:u},{})}e.QueryParamKeys=l}),"b91fe0",["99e500"]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t={document:void 0,getDocument:()=>r(d[1])(d[0],"./startStaysCheckout-document.niobe").then(babelHelpers.interopRequireWildcard).then(t=>t.default),name:'startStaysCheckout',type:'mutation',operationId:'30357c3aa27d5d864c971675e9802a4efb8b74a4ca367627dcf39c11323963e5'};e.default=t}),"c7b28e",["10e060","b8ad06"]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.shouldYieldSelectedPaymentOption=void 0;var t=babelHelpers.interopRequireDefault(r(d[0]));e.shouldYieldSelectedPaymentOption=(l,n)=>{const{isWorkTrip:o,openHomesAffiliated:s}=n,{id:u}=t.default.current(),{user_id:_,bill_info:{is_business_travel:c}}=l;return!!(!c&&o||!c&&s||_!==u)}}),"cf4240",["c1939d"]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getCheckoutMutationVariable=function({input:t,isLeanFragment:n,getPersistentQPData:o,shouldFetchTypedPaymentsData:u}){const s=h(t,o);return{input:{...b(t),quickPayData:s?{paymentDataRequest:s}:null},isLeanFragment:n,shouldFetchTypedPaymentsData:u}},e.getCheckoutQueryVariable=function({checkoutId:t,confirmationCodeOverride:n,isCompact:o,isLeanFragment:u,location:l,persistentQueryMetadata:p,getPersistentQPData:f,shouldFetchTypedPaymentsData:y}){const I={...(0,c.coerceStaysCheckoutParams)((0,s.default)(l.search)),checkoutId:t,isCompact:o,persistentQueryMetadata:p};n&&(I.code=n);const k=h(I,f);return{input:{...b(I),quickPayData:k?{paymentDataRequest:k}:null},isLeanFragment:u,shouldFetchTypedPaymentsData:y}},e.reportStaysCheckoutInputError=function(t,u){var s;const{bookingAttemptId:c,confirmationCode:l,productId:p,quickPayData:f}=t,h={hasBookingAttemptId:!!c,hasConfirmationCode:!!l,hasProductId:!!p,hasQuickPayData:!!f,origin:u};(0,n.airdogCount)('stays_checkout.api.input_error',1,h);const y=null===(s=window.location)||void 0===s?void 0:s.search;(0,o.reportError)(new Error('[Checkout][Stays] Checkout API Input Error'),{extra:{...t,origin:u,search:y}})};var t=r(d[0]),n=r(d[1]),o=r(d[2]),u=babelHelpers.interopRequireDefault(r(d[3])),s=babelHelpers.interopRequireDefault(r(d[4])),c=r(d[5]),l=r(d[6]),p=r(d[7]),f=r(d[8]);function h(t,n){const o=n();if(null===o)return null;const u=JSON.parse(o);(0,l.shouldYieldSelectedPaymentOption)(u,t)&&u.payment_options_info&&(u.payment_options_info.selected_payment_option=void 0);const s=(0,p.convertToStableObjectOrder)(u);return JSON.stringify(s)}function y(t){return t&&f.airbnbOrgGuestTypes.includes(t)?t:void 0}function I({focusedListing:n,checkin:o,checkout:u,code:s,otherCheckin:c,otherCheckout:l,otherCode:p,otherListing:f,productId:h,splitStaysId:y}){if(!(f&&void 0!==n&&c&&l&&y))return;const I={checkinDate:o,checkoutDate:u,confirmationCode:s,productId:h?(0,t.createGlobalId)('StayListing',h):null},b={checkinDate:c,checkoutDate:l,confirmationCode:p,productId:f?(0,t.createGlobalId)('StayListing',f):null};return{splitStaysId:y,stays:0===n?[I,b]:[b,I]}}function b(n){const{affiliateId:o,airbnbOrgGuestType:s,airbnbOrgResponseId:c,bookingAttemptId:l,causeId:p,checkin:f,checkout:h,code:b,couponCode:k,disasterId:C,guestCheckinTime:O,guestCurrency:P,insuranceCode:D,isFapiaoRequired:v,isLrBooking:T,isWorkTrip:L,luxuryListingQuoteId:S,numberOfAdults:_,numberOfChildren:A,numberOfInfants:F,numberOfInstallments:G,numberOfPets:N,openHomesAffiliated:q,pendingGuestEmail:Q,pendingGuestId:R,pendingTripToken:E,persistentQueryMetadata:H,productId:M,ratePlanId:w,selectedCancellationPolicyId:x,specialOfferId:B}=n,{entryPoint:j}=H,J=u.default.current().curr;return{businessTravel:{pendingGuestEmail:Q,pendingGuestId:R,pendingTripToken:E,workTrip:L},bookingAttemptId:l,checkinDate:f,checkoutDate:h,splitStays:I(n),confirmationCode:b,couponCode:k,guestCheckinTime:O,guestCounts:{numberOfAdults:Number(_)||1,numberOfChildren:Number(A)||0,numberOfInfants:Number(F)||0,numberOfPets:Number(N)||0},guestCurrencyOverride:P||J||null,insuranceCode:D,lux:{isLrBooking:T,luxuryListingQuoteId:S},metadata:{entryPoint:j,internalFlags:['LAUNCH_LOGIN_PHONE_AUTH']},numberOfInstallments:G,org:{affiliateId:o?String(o):void 0,causeId:Number(p)||void 0,disasterId:Number(C)||void 0,airbnbOrgGuestType:y(s),airbnbOrgResponseId:void 0!==c?String(c):void 0,openHomesAffiliated:!!q||void 0},productId:M?(0,t.createGlobalId)('StayListing',M):null,ratePlanId:w,selectedCancellationPolicyId:x,specialOfferId:B,china:{isFapiaoRequired:v}}}}),"dc77a0",["685055","08b665","5511db","c1939d","99e500","b91fe0","cf4240","433a68","b2b2f7"]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(u,n=(0,t.default)()){return n.find(({experiment:t})=>t===u)};var t=babelHelpers.interopRequireDefault(r(d[0]))}),"e1e17e",["6b9728"]);
//# sourceMappingURL=https://sourcemaps.d.musta.ch/airbnb/static/packages/web/common/frontend/gp-stays-checkout-route/routes/StaysCheckoutRoute/StaysCheckoutCreateRoute.prepare.92b632f206.js.map